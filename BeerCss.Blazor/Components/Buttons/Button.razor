@using Microsoft.AspNetCore.Components.Routing
@code {
    [Parameter]
    public bool Submit { get; set; }

    [Parameter]
    public bool Fill { get; set; }

    [Parameter]
    public bool Responsive { get; set; }

    [Parameter]
    public bool Border { get; set; }

    [Parameter]
    public bool Transparent { get; set; }

    [Parameter]
    public bool Circle { get; set; }

    [Parameter]
    public Size Size { get; set; } = Size.Medium;

    [Parameter]
    public Elevation Elevation { get; set; } = Elevation.NoElevate;

    [Parameter]
    public Color Color { get; set; } = Color.Default;

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public bool InverseLink { get; set; }
    
    [Parameter, EditorRequired]
    public required RenderFragment ChildContent { get; set; }

    [Parameter]
    public string? Extend { get; set; }

    [Parameter]
    public string? Href { get; set; }

    [Parameter(CaptureUnmatchedValues = true)]
    public IReadOnlyDictionary<string, object> AdditionalAttributes { get; set; } = new Dictionary<string, Object>();

    private CssBuilder CssClass => new CssBuilder()
        .AddClass("button")
        .AddClass("fill", Fill)
        .AddClass("responsive", Responsive)
        .AddClass("border", Border)
        .AddClass("transparent", Transparent)
        .AddClass("circle", Circle)
        .AddClass("extend", () => Extend is not null)
        .AddClass("inverse-link", InverseLink)
        .AddClass(Size.ToCssClass())
        .AddClass(Elevation.ToCssClass())
        .AddClass(Color.ToCssClass())
        .AddClassFromAttributes(AdditionalAttributes);

    private Dictionary<string, object> Attributes() 
    {
        Dictionary<string, object> attributes = new(AdditionalAttributes)
        {
            { "type", this.Submit ? "submit" : "button" },
        };

        if (Disabled)
        {
            attributes.Add("disabled", "disabled");
        }

        return attributes;
    }
}

@if (Href is null)
{
    <button @attributes="Attributes()" class="@CssClass">
        @ChildContent
        @if (Extend is not null)
        {
            <span>@Extend</span>
        }
    </button>
}
else
{
    <NavLink href="@Href" class="@CssClass">
        @ChildContent
        @if (Extend is not null)
        {
            <span>@Extend</span>
        }
    </NavLink>
}